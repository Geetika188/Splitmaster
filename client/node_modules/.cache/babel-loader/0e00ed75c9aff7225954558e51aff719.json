{"ast":null,"code":"var _jsxFileName = \"/Users/geetikakapil/Documents/Split master/splitwise2/client/src/components/Groups.js\";\nimport React from 'react';\nimport '../styles/signup.css';\nimport { withRouter } from \"react-router-dom\";\nimport axios from 'axios';\nimport { serverIp, serverPort } from '../components/config';\nimport SettleUp from '../components/Dashboard/popups/settleUp';\nimport { Hint } from 'react-autocomplete-hint'; //import {View, StyleSheet, ImageBackground, Alert} from 'react-native';\n//import {Container, Header, Content, Left, Body, Right, Button, Icon, Title, Text, Item, Form, Label, Input, Toast} from 'native-base';\n//import SelectMultiple from 'react-native-select-multiple';\n//import ImagePicker from 'react-native-image-crop-picker';\n//import {Actions} from 'react-native-router-flux';\n\nvar obj = {};\n\nclass AddGroup extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.addUser = e => {\n      this.setState(prevState => ({\n        user: [...prevState.user, {\n          name: \"\",\n          email: \"\",\n          invite: \"no\"\n        }] // user: [...prevState.user]\n\n      }));\n    };\n\n    this.handleChange = e => {\n      if ([\"email\"].includes(e.target.className)) {\n        console.log(e.target.className);\n        let user = [...this.state.user];\n        user[e.target.dataset.id] = {\n          [e.target.className]: e.target.value,\n          [\"invite\"]: \"yes\"\n        }; // console.log(user)\n        // user[e.target.dataset.id][e.target.className] = \"geetika.kapil@sjsu.edu\"\n\n        this.setState({\n          user\n        }, () => console.log(this.state.user));\n      } else {\n        this.setState({\n          [e.target.name]: e.target.value.toUpperCase()\n        });\n      }\n    };\n\n    this.state = {\n      groupname: '',\n      // name corresponds to student name for student role and company name for company role\n      createdate: '',\n      grouppicture: '',\n      createdby: '',\n      email: '',\n      name: '',\n      user: [{\n        name: \"\",\n        email: \"\",\n        invite: \"no\"\n      }],\n      autosuggestname: [],\n      autosuggestemail: []\n    };\n    this.onChangeUserNameHandler = this.onChangeUserNameHandler.bind(this);\n    this.onSignUpSubmit = this.onSignUpSubmit.bind(this); //     this.onChangeEmailHandler = this.onChangeEmailHandler.bind(this);\n  } // both company name and student name change will call this handler\n\n\n  componentDidMount() {\n    const mainarray = [];\n    axios.post(`${serverIp}:${serverPort}/getuserdata`).then(response => {\n      console.log('AddUsergroup Response Data');\n      console.log(response.data);\n\n      if (response.data === 'Error') {\n        window.alert('Error while querying the Database');\n      } else {\n        window.alert('Successfully Added the Usergroup');\n        var hintArrayname = [];\n        var hintArrayemail = [];\n        response.data.map(a => hintArrayname.push(a.username));\n        response.data.map(a => hintArrayemail.push(a.emailId));\n        response.data.map(a => mainarray.push(a));\n        this.setState({\n          autosuggestname: hintArrayname\n        });\n        this.setState({\n          autosuggestemail: hintArrayemail\n        });\n      }\n    }).catch(err => {\n      console.log(`In catch of axios post call to get user data ${err}`);\n      window.alert('Error in Add USERgroup API axios Post call');\n    });\n    mainarray.map(eachEvent => /*#__PURE__*/React.createElement(SettleUp, {\n      event: eachEvent,\n      key: eachEvent.event_id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 31\n      }\n    }));\n    console.log(this.state.mainarray);\n  } // eventList() {\n  //   // for each object in exercise we are returning an Exercise component and passing three props\n  //   return this.state.mainarray.map((eachEvent) => <SettleUp event={eachEvent} key={eachEvent.event_id} />);\n  // }\n\n\n  onChangeUserNameHandler(e) {\n    this.setState({\n      groupname: e.target.value\n    });\n  } //  onChangeEmailHandler(e){\n  //   this.setState({\n  //        email: e.target.value,\n  //      });\n  //    }\n\n\n  onSignUpSubmit(e) {\n    e.preventDefault();\n    const data = {\n      groupname: this.state.groupname.toLowerCase(),\n      createdby: localStorage.getItem('email_current'),\n      createdate: Date().toLocaleString()\n    };\n    console.log(data);\n    axios.defaults.withCredentials = true;\n    axios.post(`${serverIp}:${serverPort}/AddGroup`, data).then(response => {\n      console.log('Addgroup Response Data');\n      console.log(response.data);\n\n      if (response.data === 'Error') {\n        window.alert('Error while querying the Database');\n      } else {\n        window.alert('Successfully Added the group');\n        localStorage.setItem('groupname', response.data.groupname);\n        localStorage.setItem('groupid', response.data.groupid);\n        localStorage.setItem('createdby', response.data.createdby);\n        localStorage.setItem('createddate', response.data.createddate);\n        localStorage.setItem('grouppicture', response.data.groupicture);\n      }\n    }).catch(err => {\n      console.log(`In catch of axios post call to add group ${err}`);\n      window.alert('Error in Add group API axios Post call');\n    });\n    const userdata = [];\n    userdata.push([localStorage.getItem('email_current'), \"no\"]);\n    console.log(userdata);\n    console.log(this.state.user);\n    this.state.user.forEach(eachObj => {\n      userdata.push([eachObj.email, eachObj.invite]);\n    });\n    console.log(userdata);\n    const output = [];\n    let tmp;\n    sessionStorage.setItem('groupname', this.state.groupname);\n\n    for (let i = 0; i < userdata.length; i++) {\n      for (let j = 0; j < userdata[i].length; j++) {\n        tmp = {\n          groupname: this.state.groupname,\n          email: userdata[i][j],\n          invite: userdata[i][j + 1]\n        };\n        output.push(tmp);\n      }\n    }\n\n    console.log(output);\n    sessionStorage.setItem('group_length', output.length);\n    axios.post(`${serverIp}:${serverPort}/AddUserGroup`, output).then(response => {\n      console.log('AddUsergroup Response Data');\n      console.log(response.data);\n\n      if (response.data === 'Error') {\n        window.alert('Error while querying the Database');\n      } else {\n        window.alert('Successfully Added the Usergroup');\n      }\n    }).catch(err => {\n      console.log(`In catch of axios post call to add Usergroup ${err}`);\n      window.alert('Error in Add USERgroup API axios Post call');\n    });\n  }\n\n  render() {\n    let {\n      user\n    } = this.state;\n    console.log(this.state.autocomplete);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container signup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"signup-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"imageholder\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"profile\",\n      src: require('../images/logo.png'),\n      alt: \"\",\n      srcset: \"\",\n      class: \"image\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 1\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"group_avatar_upload\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      name: \"group[avatar]\",\n      id: \"group_avatar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }\n    }))), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onSignUpSubmit,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 5\n      }\n    }, \"Start a group\"), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"label1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 5\n      }\n    }, \"My Group shall be called\"), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"groupname\",\n      onChange: this.onChangeUserNameHandler,\n      className: \"form-control\",\n      type: \"text\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 2\n      }\n    }), /*#__PURE__*/React.createElement(\"h2\", {\n      class: \"members\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 6\n      }\n    }, \"Group members\"), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"invite\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 3\n      }\n    }, \"Tip: Lots of people to add? Send your friends an\", /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#\",\n      onclick: \" \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 6\n      }\n    }, \" invite link\"), \".\"), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"invite_link_container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 4\n      }\n    }), /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#\",\n      class: \"add\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.addUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 32\n      }\n    }, \"+ Add a person\")), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 3\n      }\n    }, user.map((val, idx) => {\n      let userId = `name-${idx}`,\n          emailId = `email-${idx}`,\n          inviteId = `invite-${idx}`;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: idx,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Hint, {\n        options: this.state.autosuggestname,\n        allowTabFill: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        placeholder: \"Name\",\n        type: \"text\",\n        name: userId,\n        \"data-id\": idx,\n        id: userId // value={user[idx].name}\n        //   onchange={this.onChangeNameHandler}\n        ,\n        class: \"name\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(Hint, {\n        options: this.state.autosuggestemail,\n        allowTabFill: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 16\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        placeholder: \"Email address \",\n        type: \"email\",\n        name: emailId,\n        \"data-id\": idx,\n        id: emailId // value={user[idx].email}\n        ,\n        class: \"email\" //    onchange={this.onChangeEmailHandler}\n        ,\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"checkbox\",\n        name: inviteId,\n        \"data-id\": idx,\n        id: inviteId,\n        class: \"invite\",\n        onChange: this.handleCheck,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"a\", {\n        class: \"delete remove_nested_fields\",\n        onclick: \"\",\n        href: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 17\n        }\n      }, \"\\xD7\"));\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 2\n      }\n    }, \"Confirm\"))));\n  }\n\n}\n\nexport default withRouter(AddGroup);","map":{"version":3,"sources":["/Users/geetikakapil/Documents/Split master/splitwise2/client/src/components/Groups.js"],"names":["React","withRouter","axios","serverIp","serverPort","SettleUp","Hint","obj","AddGroup","Component","constructor","props","addUser","e","setState","prevState","user","name","email","invite","handleChange","includes","target","className","console","log","state","dataset","id","value","toUpperCase","groupname","createdate","grouppicture","createdby","autosuggestname","autosuggestemail","onChangeUserNameHandler","bind","onSignUpSubmit","componentDidMount","mainarray","post","then","response","data","window","alert","hintArrayname","hintArrayemail","map","a","push","username","emailId","catch","err","eachEvent","event_id","preventDefault","toLowerCase","localStorage","getItem","Date","toLocaleString","defaults","withCredentials","setItem","groupid","createddate","groupicture","userdata","forEach","eachObj","output","tmp","sessionStorage","i","length","j","render","autocomplete","require","val","idx","userId","inviteId","handleCheck"],"mappings":"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","sourcesContent":["import React from 'react';\nimport '../styles/signup.css';\nimport { withRouter } from \"react-router-dom\";\nimport axios from 'axios';\nimport { serverIp, serverPort } from '../components/config';\nimport SettleUp from '../components/Dashboard/popups/settleUp';\nimport { Hint } from 'react-autocomplete-hint';\n//import {View, StyleSheet, ImageBackground, Alert} from 'react-native';\n//import {Container, Header, Content, Left, Body, Right, Button, Icon, Title, Text, Item, Form, Label, Input, Toast} from 'native-base';\n//import SelectMultiple from 'react-native-select-multiple';\n//import ImagePicker from 'react-native-image-crop-picker';\n//import {Actions} from 'react-native-router-flux';\n\n\n\n\nvar obj = {};\n class  AddGroup extends React.Component{\n   constructor(props) {\n      super(props);\n      this.state = {\n        groupname: '', // name corresponds to student name for student role and company name for company role\n        createdate:'',\n        grouppicture: '',\n        createdby: '',\n        email:'',\n        name:'',\n       user:[{name:\"\",email:\"\",invite:\"no\"}],\n       autosuggestname : [],\n       autosuggestemail :[],\n    \n      \n      };\n   \n      this.onChangeUserNameHandler = this.onChangeUserNameHandler.bind(this);\n      \n   \n      this.onSignUpSubmit = this.onSignUpSubmit.bind(this);\n //     this.onChangeEmailHandler = this.onChangeEmailHandler.bind(this);\n\n      \n    }\n    // both company name and student name change will call this handler\n  \ncomponentDidMount(){\n  const mainarray=[];\n  axios.post(`${serverIp}:${serverPort}/getuserdata`)\n  .then((response) => {\n    console.log('AddUsergroup Response Data');\n    console.log(response.data);\n  if (response.data === 'Error') {\n      window.alert('Error while querying the Database');\n    } else {\n      window.alert('Successfully Added the Usergroup'); \n      \n      var hintArrayname = []\n      var hintArrayemail = []\n      response.data.map(a => hintArrayname.push(a.username))\n      response.data.map(a => hintArrayemail.push(a.emailId))\n      response.data.map(a => mainarray.push(a))\n      this.setState({\n        autosuggestname : hintArrayname,\n       \n      });\n      this.setState({\n        autosuggestemail : hintArrayemail,\n      });\n    }\n  }).catch((err) => {\n    console.log(`In catch of axios post call to get user data ${err}`);\n    window.alert('Error in Add USERgroup API axios Post call');\n });\n mainarray.map((eachEvent) => <SettleUp event={eachEvent} key={eachEvent.event_id}/>);\n console.log(this.state.mainarray)\n}\n  \n    // eventList() {\n    //   // for each object in exercise we are returning an Exercise component and passing three props\n    //   return this.state.mainarray.map((eachEvent) => <SettleUp event={eachEvent} key={eachEvent.event_id} />);\n    // }\n \n    onChangeUserNameHandler(e) {\n   this.setState({\n     groupname: e.target.value,\n   });\n }\n  \n \n\n \n//  onChangeEmailHandler(e){\n//   this.setState({\n//        email: e.target.value,\n//      });\n//    }\n \n \n \n \n\n addUser =(e) =>{\n   this.setState((prevState)  => ({\n    user: [...prevState.user, {name:\"\",email:\"\",invite:\"no\"}],\n // user: [...prevState.user]\n   }));\n }\n\n handleChange = (e) => {\n  \n  if ([\"email\"].includes(e.target.className) ) {\n    console.log(e.target.className);\n   \n    let user = [...this.state.user]\n    user[e.target.dataset.id] = {\n      [e.target.className]: e.target.value,\n      [\"invite\"]: \"yes\"\n  };\n   // console.log(user)\n   // user[e.target.dataset.id][e.target.className] = \"geetika.kapil@sjsu.edu\"\n    this.setState({ user }, () => console.log(this.state.user))\n  } else {\n    this.setState({ [e.target.name]: e.target.value.toUpperCase() })\n  }\n\n}\n\n\n\n onSignUpSubmit(e) {\n   e.preventDefault();\n   const data = {\n      groupname: this.state.groupname.toLowerCase(),\n      createdby : localStorage.getItem('email_current'),\n      createdate:Date().toLocaleString()\n        };\n      console.log(data);\n      \n    axios.defaults.withCredentials = true;\n    axios.post(`${serverIp}:${serverPort}/AddGroup`, data)\n      .then((response) => {\n        console.log('Addgroup Response Data');\n        console.log(response.data);\n      if (response.data === 'Error') {\n          window.alert('Error while querying the Database');\n        } else {\n          window.alert('Successfully Added the group'); \n\t\t  localStorage.setItem('groupname', response.data.groupname);\n\t\t\t   localStorage.setItem('groupid', response.data.groupid);\n\t\t\t   localStorage.setItem('createdby', response.data.createdby);\n\t\t\t   localStorage.setItem('createddate', response.data.createddate);\n\t\t\t   localStorage.setItem('grouppicture', response.data.groupicture);       \n        }\n      }).catch((err) => {\n        console.log(`In catch of axios post call to add group ${err}`);\n        window.alert('Error in Add group API axios Post call');\n      });\n\n\n\n      const userdata = [];\n      userdata.push([localStorage.getItem('email_current'),\"no\"]);\n      console.log(userdata);\n       console.log(this.state.user)\n       this.state.user.forEach((eachObj) => {\n      userdata.push([eachObj.email,eachObj.invite]);\n     });\n       console.log(userdata);\n      const output=[]\n     let tmp;\nsessionStorage.setItem('groupname',this.state.groupname);\n\n     for(let i = 0; i < userdata.length; i++){\n       for(let j = 0 ; j < userdata[i].length ; j++)\n       {\n       \n       \n       tmp = {groupname : this.state.groupname,email: userdata[i][j],invite : userdata[i][j+1] };\n       output.push(tmp);      \n       }\n      \n    }\n \n     console.log(output)\n \n       sessionStorage.setItem('group_length',output.length);\n     \n      axios.post(`${serverIp}:${serverPort}/AddUserGroup`, output)\n      .then((response) => {\n        console.log('AddUsergroup Response Data');\n        console.log(response.data);\n      if (response.data === 'Error') {\n          window.alert('Error while querying the Database');\n        } else {\n          window.alert('Successfully Added the Usergroup'); \n\t\t       \n        }\n      }).catch((err) => {\n        console.log(`In catch of axios post call to add Usergroup ${err}`);\n        window.alert('Error in Add USERgroup API axios Post call');\n     });\n\n  }\n   \n   render()\n\n     {\n     \n       let {user} =this.state\n       console.log(this.state.autocomplete);\n\n\t\t return(\n         <div className = \"container signup\">\n     <div className = \"signup-form\">\n       \n\t   <div class=\"imageholder\">\n<img className = \"profile\" src={require('../images/logo.png')} alt=\"\" srcset=\"\"class=\"image\"/>\n      \n\t  <div id='group_avatar_upload'>\n        <input type=\"file\" name=\"group[avatar]\" id=\"group_avatar\" />\n      </div>\n\t  </div>\n       <form onSubmit={this.onSignUpSubmit} onChange={this.handleChange}>\n\t   <h2>Start a group</h2>\n    <div class=\"label1\">\n\t\tMy Group shall be called\n\t</div>\n\t<input id = \"groupname\" \n       onChange={this.onChangeUserNameHandler}\n      className = \"form-control\" type=\"text\" required/>\n     <h2 class =\"members\">Group members</h2>\n\t <div class=\"invite\">\n\n              Tip: Lots of people to add? Send your friends an \n\t\t\t  <a href='#' onclick=\" \"> invite link</a>.\n            </div>\n\t\t\t<div id=\"invite_link_container\" >\n\t\t\t\t</div>\n\n      \n      \n\n        <a href=\"#\"class=\"add\"><button onClick={this.addUser}>+ Add a person</button></a>\n\n\n      {/* <div>\n\t  <input placeholder=\"Name\" class=\"name\"   onchange={this.onChangeNameHandler} type=\"text\"  id=\"name\" required/>\n    <input placeholder=\"Email address \" class=\"email\"  onchange={this.onChangeEmailHandler} type=\"email\"  id=\"email\" required/>\n      <a class=\"delete remove_nested_fields\" onclick=\"\" href=\"javascript:void(0)\">×</a>\n   </div> */}\n\n\n       \n\n\n  <div>    \n\t\n   {\n          user.map((val, idx)=> {\n            let userId = `name-${idx}`, emailId = `email-${idx}`,inviteId = `invite-${idx}`\n            return (\n              <div key={idx}>\n                <Hint options={this.state.autosuggestname} allowTabFill>\n                <input\n                placeholder=\"Name\"\n                  type=\"text\"\n                  name={userId}\n                  data-id={idx}\n                  id={userId}\n                 // value={user[idx].name}\n              //   onchange={this.onChangeNameHandler}\n                  class=\"name\"\n                required/>\n                </Hint>\n               <Hint options={this.state.autosuggestemail} allowTabFill>\n                <input\n                placeholder=\"Email address \"\n                  type=\"email\"\n                  name={emailId}\n                  data-id={idx}\n                  id={emailId}\n                 // value={user[idx].email}\n                  class=\"email\"\n              //    onchange={this.onChangeEmailHandler}\n                required/>\n                </Hint> \n                  <input type=\"checkbox\" name={inviteId} data-id={idx} id={inviteId} class=\"invite\" onChange={this.handleCheck} />\n      \n                <a class=\"delete remove_nested_fields\" onclick=\"\" href=\"\">×</a>\n              </div>\n            )\n          })\n        }\n\t </div>\n \n   \n <button type=\"submit\" className=\"btn\">Confirm</button>\n      </form>\n   </div>\n\n\n\n    </div>\n\n    \n\n);\n}\n}\n     \nexport default withRouter(AddGroup);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}